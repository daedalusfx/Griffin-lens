# Dockerfile
# این فایل نحوه ساخت ایمیج Docker برای سرور را تعریف می‌کند

# 1. استفاده از یک ایمیج پایه رسمی پایتون
FROM python:3.11-slim

# 2. تنظیم پوشه کاری داخل کانتینر
WORKDIR /app

# 3. کپی کردن فایل نیازمندی‌ها و نصب پکیج‌ها
# این کار به Docker اجازه می‌دهد تا این لایه را کش کند و فرآیند ساخت سریع‌تر شود
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 4. کپی کردن تمام کدهای پروژه به داخل کانتینر
COPY . .

# 5. مشخص کردن پورتی که سرور روی آن اجرا می‌شود
EXPOSE 5000

# 6. دستور اجرای سرور هنگام راه‌اندازی کانتینر
# استفاده از 0.0.0.0 برای اینکه سرور از خارج کانتینر قابل دسترس باشد
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "5000"]
